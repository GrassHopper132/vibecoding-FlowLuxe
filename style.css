:root{
  --bg:#050716; --card:#0b1020; --text:#f9fafb; --muted:#9ca3af; --border:#1f2937;
  --a1:#7c3aed; --a2:#22d3ee;             /* default gradient */
  --btn-halo: #312e81;
}

/* Mood themes (updated dynamically via body class) */
body.theme-calm { --a1:#0ea5e9; --a2:#14b8a6; background: radial-gradient(900px 500px at 15% -10%,#0b1a2b 0%,transparent 60%), radial-gradient(900px 500px at 85% 110%,#0a1320 0%,transparent 60%), var(--bg); }
body.theme-confident { --a1:#7c3aed; --a2:#f59e0b; background: radial-gradient(900px 500px at 15% -10%,#1a0e2b 0%,transparent 60%), radial-gradient(900px 500px at 85% 110%,#1a0e12 0%,transparent 60%), var(--bg); }
body.theme-playful { --a1:#ec4899; --a2:#fb923c; background: radial-gradient(900px 500px at 15% -10%,#2b0b1a 0%,transparent 60%), radial-gradient(900px 500px at 85% 110%,#2b160b 0%,transparent 60%), var(--bg); }

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:var(--text);
  transition: background 400ms ease;
}

/* canvas particles */
#fxCanvas{position:fixed;inset:0;z-index:-1;opacity:.5}

/* layout */
.shell{max-width:960px;margin:0 auto;padding:16px}
.header{padding-top:20px;padding-bottom:8px;display:flex;justify-content:space-between;align-items:center;gap:12px}
.brand{display:flex;align-items:center;gap:12px}
.logo{height:40px;width:auto;border-radius:12px}
.brand h1{font-size:26px}
.brand p{font-size:14px;color:var(--muted)}
.toggles{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.toggle{display:flex;gap:6px;align-items:center;font-size:12px;color:var(--muted)}
.small{font-size:12px;padding:6px 10px;border-radius:999px}

.main{display:flex;flex-direction:column;gap:16px;margin:8px 0 24px}
.card{
  background:linear-gradient(145deg,#0b1020,#060916);
  border-radius:18px;border:1px solid var(--border);
  padding:16px 18px;box-shadow:0 18px 40px rgba(0,0,0,.35);
  animation: cardIn .3s ease;
}
@keyframes cardIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.card h2{font-size:18px;margin-bottom:6px}
.hint{font-size:13px;color:var(--muted);margin-bottom:12px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));margin-top:8px}
.field{display:flex;flex-direction:column;gap:4px}
label{font-size:13px;color:var(--muted)}

select{
  padding:8px 10px;border-radius:10px;border:1px solid #1f2937;
  background:#050816;color:var(--text);font-size:14px
}
select:focus{outline:1px solid var(--a2)}

button{
  cursor:pointer;border-radius:999px;border:1px solid transparent;
  font-size:14px;padding:10px 16px;transition:filter .12s ease, transform .12s ease, box-shadow .12s ease;
}
.primary{background:linear-gradient(135deg,var(--a1),var(--a2));color:var(--text);border-color:var(--btn-halo)}
.primary:hover{filter:brightness(1.08)}
.primary:active{transform:translateY(1px)}
.primary.outline{background:transparent;border:1px solid var(--a1)}
.ghost{background:transparent;border:1px solid #374151;color:var(--muted)}
.ghost:hover{border-color:var(--a2);color:var(--text)}

.presets{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.preset{border:1px solid #374151;background:transparent;color:var(--text);padding:10px 12px;border-radius:12px}
.preset:hover{border-color:var(--a2)}

#resultCard{margin-top:4px}
.session-title{font-weight:600;margin-bottom:6px}
.note{margin-top:6px;font-size:13px;color:var(--muted)}
.list{list-style:none;padding:0;margin:0;display:grid;gap:8px}
.list li{background:#0b1222;border:1px solid #1f2436;padding:10px;border-radius:10px}

/* Favorites drawer */
.drawer{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none}
.drawer[aria-hidden="false"]{display:block}
.drawer-inner{position:absolute;right:0;top:0;bottom:0;width:360px;max-width:95vw;background:#0b1020;border-left:1px solid #1f2436;padding:12px 12px 18px}
.drawer-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}

/* Breathing overlay */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.65);display:flex;align-items:center;justify-content:center}
.breath-card{background:#0b1020;border:1px solid #1f2436;border-radius:16px;padding:20px;display:flex;flex-direction:column;gap:10px;align-items:center}
.ring{width:140px;height:140px;border-radius:999px;border:3px solid var(--a2);box-shadow:0 0 40px rgba(0,0,0,.35);animation:breath 12s infinite ease-in-out}
@keyframes breath{0%{transform:scale(0.85)} 25%{transform:scale(1.05)} 50%{transform:scale(0.85)} 75%{transform:scale(1.05)} 100%{transform:scale(0.85)}}
#breathText{color:var(--muted)}

/* accessibility */
@media (prefers-reduced-motion: reduce){
  *{animation:none!important;transition:none!important}
}
.footer{padding-bottom:18px;text-align:center;font-size:12px;color:var(--muted)}

@media (max-width:640px){
  .brand h1{font-size:22px}
}
tyle.cs